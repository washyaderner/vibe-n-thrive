---
// Mock reviews â€” will be replaced with Google Places API data
const reviews = [
  {
    author: 'Anonymous',
    rating: 5,
    text: 'Part therapy, part sound healing, part meditation. I highly recommend Vibe\'N Thrive Vibro Acoustic Therapy.',
    date: '',
  },
  {
    author: 'Russ',
    rating: 5,
    text: 'I signed up for the 4-session package (The Reset) and was immediately happy about that choice after my first session. The hour went by so quickly and was extremely effective. I suffer from back pain and need chiro regularly. I chose the chakra alignment for my first session and felt amazing afterwards. Carson explained the science behind what was happening and explored some other ideas of what we can do in future sessions.\n\nMy wife and I both did a session the same day, about two months post-foot-surgery for her, so at that time, the foot pain was slowly leaving while back pain was coming in strong due to a shift in which side of her body was holding most of her weight. She ended up doing a muscle/tissue focused healing session, and it worked wonders. She was having trouble sleeping prior to our visit, for a few nights in a row, but after her session, she slept like a baby that night. I can\'t thank Carson enough for guiding us through the sessions and curating them so perfectly for us.\n\nHighly recommend setting up multiple sessions and going regularly. The benefits compound.',
    date: '',
  },
  {
    author: 'William',
    rating: 5,
    text: 'I was unaware of how effective and healing this could be. Carson facilitated my first experience with this type of therapy and I definitely felt a shift in my energy and consciousness, on a spiritual level. It was beyond what I had thought was even possible. 10/10 thanks Carson!',
    date: '',
  },
];

function stars(rating: number) {
  return Array.from({ length: 5 }, (_, i) => i < rating ? 'filled' : 'empty');
}

// Sort reviews: longest goes to the right column, shorter ones stack on the left
const sorted = [...reviews].sort((a, b) => a.text.length - b.text.length);
const shortReviews = sorted.slice(0, -1);
const longReview = sorted[sorted.length - 1];
---

<section class="reviews section" id="reviews">
  <div class="container">
    <div class="text-center">
      <p class="section-label">Reviews</p>
      <h2 class="section-title">What Our Clients Say</h2>
      <p class="section-subtitle" style="margin-left:auto;margin-right:auto;">
        Real experiences from real people finding relief through vibration therapy.
      </p>
    </div>

    <div class="reviews__grid">
      <div class="reviews__col reviews__col--short">
        {shortReviews.map(review => (
          <div class="reviews__card liquid-glass">
            <div class="reviews__stars">
              {stars(review.rating).map(state => (
                <span class={`reviews__star reviews__star--${state}`}>&#9733;</span>
              ))}
            </div>
            <p class="reviews__text">{review.text}</p>
            <div class="reviews__meta">
              <span class="reviews__author">{review.author}</span>
              <span class="reviews__date">{review.date}</span>
            </div>
          </div>
        ))}
      </div>
      <div class="reviews__col reviews__col--long">
        <div class="reviews__card liquid-glass">
          <div class="reviews__stars">
            {stars(longReview.rating).map(state => (
              <span class={`reviews__star reviews__star--${state}`}>&#9733;</span>
            ))}
          </div>
          <p class="reviews__text">{longReview.text}</p>
          <div class="reviews__meta">
            <span class="reviews__author">{longReview.author}</span>
            <span class="reviews__date">{longReview.date}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  .reviews__grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 2rem;
    align-items: start;
    padding: 1rem 0 2rem;
  }

  .reviews__col--short {
    display: flex;
    flex-direction: column;
    gap: 2rem;
  }

  .reviews__col--long {
    display: flex;
  }

  .reviews__col--long .reviews__card {
    flex: 1;
  }

  .reviews__card {
    padding: 2rem;
    box-shadow:
      0 0 20px rgba(13, 148, 136, 0.12),
      0 0 60px rgba(13, 148, 136, 0.06),
      0 4px 30px rgba(0, 0, 0, 0.04);
  }

  .reviews__stars {
    display: flex;
    gap: 2px;
    margin-bottom: 1rem;
  }

  .reviews__star {
    font-size: 1.125rem;
  }

  .reviews__star--filled {
    color: #f59e0b;
  }

  .reviews__star--empty {
    color: var(--color-gray-200);
  }

  .reviews__text {
    font-size: 0.9375rem;
    color: var(--color-gray-600);
    line-height: 1.7;
    margin-bottom: 1.5rem;
    white-space: pre-line;
  }

  .reviews__meta {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .reviews__author {
    font-weight: 600;
    color: var(--color-gray-800);
    font-size: 0.9375rem;
  }

  .reviews__date {
    font-size: 0.8125rem;
    color: var(--color-gray-400);
  }

  @media (max-width: 768px) {
    .reviews__grid {
      grid-template-columns: 1fr;
    }

    .reviews__col--long {
      display: block;
    }
  }
</style>

